5-6

```sql
create trigger maintain_account
after insert on account
referencing new row as nrow
for each row 
insert into branch_cust
	select nrow.branch_name,customer_name
	from depositor
	where nrow.account_number = depositor.account_number;
	
create trigger maintain_depositor
after insert on depositor
referencing new row as nrow
for each row 
insert into branch_cust
	select branch_name,nrow.customer_name
	from account
	where nrow.account_number = account.account_number;
```



5-15

```sql
#avg_salary函数
create function avg_salary(cp_name carvahr(20))
	return integer
begin
	declare res integer;
		select avg(salary) into res
		from works
		where works.company_name = cp_name
	return res;
end
#寻找平均工资大于"First Bank"的公司
select company_name
from works
where avg_salary(company_name) > avg_salary("First Bank");
```



5-19

>当被参照的s中的一个元组被删除，触发器会被激活。触发器会访问并检查关系r，并删除关系r
>
>中所有属性B等于s中被删除的元组的属性A的元组。



